<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>法律相談AI（越水はるか）</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="topbar">
    <div class="topbar__left">
      <div class="brand">
        <div class="brand__title">法律相談AI</div>
        <div class="brand__sub">越水 はるか（監修）</div>
      </div>
    </div>
    <div class="topbar__right">
      <span id="connPill" class="pill">接続確認中…</span>
    </div>
  </div>

  <main class="layout">
    <!-- 監修者カード -->
    <aside class="card profile">
      <div class="profile__row">
        <img class="profile__img" src="/profile-placeholder.png" alt="監修者" />
        <div class="profile__meta">
          <div class="profile__name">越水 はるか</div>
          <div class="profile__role">弁護士人格AI（監修）</div>
        </div>
      </div>

      <p class="profile__desc">
        法律相談は、焦りが強いほど判断が難しくなりがちです。<br/>
        まずは事実と論点を切り分け、現実的な選択肢を整理します。
      </p>

      <dl class="kv">
        <div><dt>応対</dt><dd>落ち着き・知的／必要時のみ共感</dd></div>
        <div><dt>音声</dt><dd>ElevenLabs v3</dd></div>
        <div><dt>プライバシー</dt><dd>質問の保存なし</dd></div>
      </dl>

      <div class="notice">
        <div class="notice__title">ご注意（大切）</div>
        <ul class="notice__list">
          <li>ここでの回答は一般的な情報であり、個別の法的助言ではありません。</li>
          <li>緊急性（期限・差し迫った危険・逮捕等）がある場合は、専門家や公的窓口へ早めに相談してください。</li>
          <li>入力内容は保存しません（ログ保存なし）。</li>
        </ul>
      </div>
    </aside>

    <!-- 相談エリア -->
    <section class="card main">
      <div class="main__head">
        <div class="main__title">相談</div>
        <button id="btnClear" class="btn btn--ghost" type="button">会話をクリア</button>
      </div>

      <div id="err" class="error" hidden></div>

      <div id="log" class="log" aria-live="polite">
        <div class="msg msg--ai">
          <div class="msg__role">越水はるか</div>
          <div class="msg__body">
            こんにちは。状況を整理しながら進めます。<br/>
            まずは「いつ／誰が／何を／どの順で」起きたかを教えてください。
          </div>
        </div>
      </div>

      <form id="form" class="composer">
        <textarea id="q" class="composer__input" rows="3"
          placeholder="例）会社から突然解雇と言われました。理由が曖昧です。通知は口頭のみ。"
          maxlength="2000" required></textarea>

        <div class="composer__bottom">
          <div class="composer__count" id="count">0 / 2000</div>

          <div class="composer__actions">
            <div id="spinner" class="spinner" hidden>
              <span class="spinner__dot"></span>
              <span class="spinner__text">回答を生成しています…</span>
            </div>
            <button class="btn btn--primary" type="submit">相談する</button>
          </div>
        </div>
      </form>

      <div class="audio">
        <div class="audio__label">音声</div>
        <div class="audio__row">
          <button id="btnPlay" class="btn btn--ghost" type="button" disabled>▶ 再生</button>
          <div id="audioTime" class="audio__time">--:--</div>
        </div>
        <audio id="audio" preload="metadata"></audio>
      </div>
    </section>
  </main>

  <footer class="footer">© 法律相談AI（越水はるか）</footer>
  <script src="/app.js" defer></script>
</body>
</html>
